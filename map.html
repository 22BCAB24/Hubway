<!DOCTYPE html>
<html>
  <head>
	<meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
	<style type="text/css">
	  html { height: 100% }
	  body { height: 100%; margin: 0; padding: 0 }
	  #map_canvas { height: 100% }
	</style>
	<script type="text/javascript"
	  src="http://maps.googleapis.com/maps/api/js?&sensor=false">
	</script>
	<script type="text/javascript">
		var map;
	  function initialize() {
		var boston = new google.maps.LatLng(42.340592,-71.09489);
		var myOptions = {
		  center: boston,
		  zoom: 13,
		  mapTypeId: google.maps.MapTypeId.ROADMAP
		};
		 map = new google.maps.Map(document.getElementById("map_canvas"),
			myOptions);
	  }
	  
	  var route;
	  
	  function plotroute(route){
	  	  for (var i = 0; i < route.length; i++){
	  		  station = route[i];
	  		  
	  		  // Create a Google LatLng object to pass to the Google Marker
	  		  var point = new google.maps.LatLng(station.lat, station.long);
	  		  
	  		  // Create the Google Marker Point with the LatLng object
	  		  var marker = new google.maps.Marker({
	  		  	position: point, 
	  		  	map: map,
	  		  	title: station.name
	  		  });
	  	  }
	    }
	    
	  function loadroute() {
		  	var xobj = new XMLHttpRequest();
		  	xobj.overrideMimeType("application/json");
		  	xobj.open('GET', 'route.json', true);
		  	xobj.onreadystatechange = function () {
		  		if (xobj.readyState == 4) {
		  			var jsonTexto = xobj.responseText;
		  			route = JSON.parse(jsonTexto);
		  			plotroute(route);
		  		}
		  	}
		  	xobj.send(null);
	  }
	  

	  
	  loadroute();
	  
	  
	</script>
  </head>
  <body onload="initialize()">
	<div id="map_canvas" style="width:100%; height:100%"></div>
  </body>
</html>